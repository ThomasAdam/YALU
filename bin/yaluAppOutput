#!/bin/bash
# Generates a menu for the recently/frequently used apps list

echo "DestroyMenu recreate yaluAppOutput"

echo "AddToMenu yaluAppOutput \"Application Output\" Title"
echo "AddToMenu yaluAppOutput DynamicPopupAction PipeRead \"\$[YALU]/bin/yaluAppOutput\""

if which screen &> /dev/null; then
	(
		for file in "$(screen -ls | grep "^[[:space:]]*[[:digit:]]*[.]yalu_")"; do
			echo "$file" | sed -re "s/^[[:space:]]*[[:digit:]]*[.]yalu_([^[:space:]]+)[[:space:]].*/\1/"
		done
	) | while read line; do
		echo "AddToMenu yaluAppOutput \"$line\" Exec exec xterm -e \"screen -rx 'yalu_$line'\""
	done
else
	echo "AddToMenu yaluAppOutput \"You must install 'screen'\" Nop"
fi

